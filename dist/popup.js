(()=>{const e=document.getElementById("statusMessage"),t=(document.querySelector(".help"),document.querySelector(".share_button"));function n(e,t,n=""){const o=document.createElement(e);return o.id=t,"a"===e&&(o.href="https://forms.gle/dvChonHPiJS1Agez9",o.target="_blank"),o.textContent=n,o}function o(){chrome.runtime.sendMessage({action:"logoutUser"},(function(e){e&&e.loggedOut&&chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.sendMessage(t.id,{action:"loggedoutAlert"})}))}))}document.addEventListener("DOMContentLoaded",(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){const r=t[0];chrome.tabs.sendMessage(r.id,{action:"checkLinkedInUrl"},(function(t){t&&t.isLinkedIn?(e.style.backgroundColor="#0077B5",chrome.runtime.sendMessage({action:"addDashboard"}),chrome.runtime.sendMessage({action:"checkserver"},(function(t){t&&t.awake?(e.textContent="Server is up and running. Move to Feed or Messaging Page",e.style.backgroundColor="#0077B5",chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.sendMessage(t.id,{action:"checkForElement"})})),chrome.runtime.sendMessage({action:"checkAuthentication"},(function(t){t&&t.authenticated?function(e){const t=n("div","userCredits",` üíé Credits Left: ${e.credits}`),r=(n("a","buyCredits","Need More Credits? Click Here"),n("div","currentPlan",` üí∞ Current Plan: ${e.plan.toUpperCase()}`)),c=n("button","logoutButton","Logout"),s=n("div","user-email",`üíå ${e.email}`),i=n("div","user-organization","üè¢ Personal Account");c.style.display="block";const a=document.querySelector(".userDetails");a.appendChild(s),a.appendChild(i),a.appendChild(t),a.appendChild(r),a.appendChild(c),c.addEventListener("click",o)}(t.data.user):e.textContent="User Not Found",t&&t.authenticated&&t.data.user.credits<5&&(e.textContent="Credits Exhausted",e.style.backgroundColor="red")}))):(e.textContent="Server is down. Please try again after some time.",e.style.backgroundColor="#f44336")}))):(e.textContent="This is not a LinkedIn page. Please open LinkedIn to use the extension.",e.style.backgroundColor="#f44336",e.style.color="#fff")}))}))})),chrome.runtime.onMessage.addListener((function(t,n,o){if("elementFound"===t.action){const n=t.element;e.textContent=`Welcome ${n}`}else"elementNotFound"===t.action&&(e.textContent="Welcome to EngageGPT")})),t.addEventListener("click",(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.sendMessage(t.id,{action:"copylinktoclipboard"})}))}))})();