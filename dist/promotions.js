chrome.runtime.sendMessage({action:"checkAuthentication"},(function(e){if(e&&e.authenticated&&!0===e.data.user.tagPost){function t(e){e.forEach((e=>{!function(e){if("true"===e.dataset.analyzed)return;e.dataset.analyzed="true";const t={content:n(e),author:r(e),author_url:o(e),likes:a(e),comments:s(e)};chrome.runtime.sendMessage({action:"analyzePost",data:t},(function(t){if(t&&t.success){if(t.data){const n=e.querySelector(".feed-shared-update-v2__description-wrapper .feed-shared-inline-show-more-text span.break-words");if(n){const e=document.createElement("button");e.type="button",e.innerText=t.data.topic,e.style.backgroundColor="#0073b1",e.style.color="#ffffff",e.style.border="none",e.style.borderRadius="8px",e.style.padding="5px 10px",e.style.fontSize="0.9em",e.style.fontWeight="bold",e.style.marginBottom="5px",e.style.marginRight="10px",e.style.cursor="default",n.prepend(e)}}}else console.error("Error sending post data to backend")}))}(e)}))}const i=document.querySelectorAll(".feed-shared-update-v2.feed-shared-update-v2--minimal-padding.full-height.relative");function n(e){const t=e.querySelector(".feed-shared-update-v2__description-wrapper .feed-shared-inline-show-more-text span.break-words");return t?t.innerText.trim():""}function r(e){const t=e.querySelector(".update-components-actor__title span span span");return t?t.innerText.trim():""}function o(e){const t=e.querySelector(".update-components-actor__meta-link");return t?t.href:""}function a(e){const t=e.querySelector(".social-details-social-counts__reactions .social-details-social-counts__reactions-count");if(t){const e=t.innerText.trim().replace(/\D/g,"");return parseInt(e,10)||0}return 0}function s(e){const t=e.querySelector(".social-details-social-counts__comments .social-details-social-counts__count-value");if(t){const e=t.innerText.trim().match(/(\d+)/);return e?parseInt(e[1],10):0}return 0}t(Array.from(i)),new MutationObserver((e=>{const n=[];for(let t of e)for(let e of t.addedNodes)if(e.nodeType===Node.ELEMENT_NODE)if(e.matches&&e.matches(".feed-shared-update-v2.feed-shared-update-v2--minimal-padding.full-height.relative"))n.push(e);else{const t=e.querySelectorAll(".feed-shared-update-v2.feed-shared-update-v2--minimal-padding.full-height.relative");t.length>0&&n.push(...t)}n.length>0&&t(n)})).observe(document.querySelector(".scaffold-finite-scroll__content"),{childList:!0,subtree:!0})}}));