(()=>{function e(e){e.forEach((e=>{!function(e){if("true"===e.dataset.analyzed)return;e.dataset.analyzed="true";const t={content:n(e),author:r(e),author_url:o(e),likes:a(e),comments:s(e)};chrome.runtime.sendMessage({action:"savePost",data:t},(function(e){e&&e.success||console.error("Error sending post data to backend")}))}(e)}))}const t=document.querySelectorAll(".feed-shared-update-v2.feed-shared-update-v2--minimal-padding.full-height.relative");function n(e){const t=e.querySelector(".feed-shared-update-v2__description-wrapper .feed-shared-inline-show-more-text span.break-words");return t?t.innerText.trim():""}function r(e){const t=e.querySelector(".update-components-actor__title span span span");return t?t.innerText.trim():""}function o(e){const t=e.querySelector(".update-components-actor__meta-link");return t?t.href:""}function a(e){const t=e.querySelector(".social-details-social-counts__reactions .social-details-social-counts__reactions-count");if(t){const e=t.innerText.trim().replace(/\D/g,"");return parseInt(e,10)||0}return 0}function s(e){const t=e.querySelector(".social-details-social-counts__comments .social-details-social-counts__count-value");if(t){const e=t.innerText.trim().match(/(\d+)/);return e?parseInt(e[1],10):0}return 0}e(Array.from(t)),new MutationObserver((t=>{const n=[];for(let e of t)for(let t of e.addedNodes)if(t.nodeType===Node.ELEMENT_NODE)if(t.matches&&t.matches(".feed-shared-update-v2.feed-shared-update-v2--minimal-padding.full-height.relative"))n.push(t);else{const e=t.querySelectorAll(".feed-shared-update-v2.feed-shared-update-v2--minimal-padding.full-height.relative");e.length>0&&n.push(...e)}n.length>0&&e(n)})).observe(document.querySelector(".scaffold-finite-scroll__content"),{childList:!0,subtree:!0})})();